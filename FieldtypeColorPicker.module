<?php

/**
 * ProcessWire ColorPicker Fieldtype
 * 08.08.2012 by Philipp "Soma" Urlich
 * ColorPicker jQuery Plugin by http://www.eyecon.ro/colorpicker/
 *
 * ProcessWire 2.x
 * Copyright (C) 2010 by Ryan Cramer
 * Licensed under GNU/GPL v2, see LICENSE.TXT
 *
 * http://www.processwire.com
 * http://www.ryancramer.com
 *
 */

class FieldtypeColorPicker extends Fieldtype {


	public static function getModuleInfo() {
		return array(
			'title' => 'ColorPicker',
			'version' => 101,
			'summary' => 'Fieldtype that stores a HEX color. Color can be picked using a jQuery ColorPicker Plugin by http://www.eyecon.ro/colorpicker/',
			'href' => 'http://processwire.com/talk/topic/865-module-colorpicker/page__gopid__7340#entry7340',
			'installs' => 'InputfieldColorPicker'
			);
	}
	/**
	 * Return the default blank value
	 *
	 */
	public function getBlankValue(Page $page, Field $field) {
		return 'FFFFFF';
	}
	/**
	 * Return the associated InputfieldColorPicker
	 *
	 */
	public function getInputfield(Page $page, Field $field) {
		$inputField = $this->modules->get('InputfieldColorPicker');
		return $inputField;
	}

	public function sanitizeValue(Page $page, Field $field, $value) {
		return strtoupper(substr($value, 0, 6));
	}

	/**
	 * Return the database schema in specified format
	 *
	 */
	public function getDatabaseSchema(Field $field) {
		$schema = parent::getDatabaseSchema($field);
		$schema['data'] = 'CHAR(6) NOT NULL'; // i.e. FFFFFF or 333333 (hex color codes)
		return $schema;
	}

}
